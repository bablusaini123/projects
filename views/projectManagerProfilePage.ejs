<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Project Management - makeMybiz PM</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" type="text/css" href="../css/adminx.css" media="screen" />
  </head>
  <body>
    <div class="adminx-container">
        <%- include("../partials/header.ejs")%>

        <!-- expand-hover push -->
        <!-- Sidebar -->
       
        <!-- Sidebar End -->
        <%- include("../partials/projectManager_dashboard.ejs")%>
     <!-- Sidebar -->
   
     <!-- Sidebar End -->

      <!-- Main Content -->
      <div class="adminx-content">
        <div class="adminx-main-content">
          <div class="container-fluid">
            <!-- BreadCrumb -->
            <nav aria-label="breadcrumb" role="navigation">
              <ol class="breadcrumb adminx-page-breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Project Manager Dashboard</a></li>
                <li class="breadcrumb-item active  aria-current="page"> Profile Page </li>
              </ol>
            </nav>

            <div class="pb-3">
              <h1>Project Manager Profile</h1>
            </div>

            <div class="row">
              <div class="col-lg-12">
                <div class="card mb-grid">
                  <div class="card-header d-flex justify-content-between align-items-center">
                    <div class="card-header-title">Fill up this form</div>

                    <nav class="card-header-actions">
                      <a class="card-header-action" data-toggle="collapse" href="#card1" aria-expanded="false" aria-controls="card1">
                        <i data-feather="minus-circle"></i>
                      </a>
<!--                       
                      <div class="dropdown">
                        <a class="card-header-action" href="#" role="button" id="card1Settings" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                          <i data-feather="settings"></i>
                        </a>

                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="card1Settings">
                          <a class="dropdown-item" href="#">Action</a>
                          <a class="dropdown-item" href="#">Another action</a>
                          <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                      </div> -->

                      <!-- <a href="#" class="card-header-action">
                        <i data-feather="x-circle"></i>
                      </a> -->
                    </nav>
                  </div>
                  <div class="card-body collapse show" id="card1">
                    <div class="row" >
                      <div class="col-md-6">
                        <div class="form-group">
                          <label class="form-label" for="exampleInputEmail1">Developer Name</label>
                          <input readonly value="<%=result.name%>" id="name" required name="name" type="Name" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter Customer Name">
                          
                        </div>
                        <div class="form-group">
                          <label class="form-label" for="exampleInputEmail1">Mobile Number</label>
                          <input readonly value="<%=result.phone_no%>"  required name="phone_no" type="text" class="form-control" id="phone_no" aria-describedby="emailHelp" placeholder="Enter Mobile number">
                        </div>
                        <div class="form-group">
                          <label class="form-label" for="exampleInputEmail1">Company Name </label>
                          <input readonly value="<%=result.company_name%>"  required name="company_name" type="text" class="form-control" id="company_name" aria-describedby="emailHelp" placeholder="Enter Company Name">
                        </div>
                        <div class="form-group">
                          <label class="form-label" for="exampleInputEmail1">Developer address</label>
                          <input readonly value="<%=result.address%>" required name="customer_address" type="text" class="form-control" id="address" aria-describedby="emailHelp" placeholder="Enter Customer address">
                        </div>
                      </div>

                      <div class="col-md-6">
                        <div class="form-group">
                          <label class="form-label" for="exampleInputEmail1">GSTIN Number</label>
                          <input readonly value="<%=result.gst_no%>" required name="gst_no" type="text" class="form-control" id="gst_no" aria-describedby="emailHelp" placeholder="Enter GSTIN Number">
                        </div>
                        <div class="form-group">
                          <label class="form-label" for="exampleInputEmail1">Domain Name</label>
                          <input readonly value="<%=result.domain%>" required name="domain" type="text" class="form-control" id="domain" aria-describedby="emailHelp" placeholder="Enter Domain Name">
                        </div>
                        <div class="form-group">
                          <label for="" id="errorLabel" class="text-danger"></label>
                          <label class="form-label" for="exampleInputEmail1">Email address</label>
                          <input readonly value="<%=result.email%>" required name="email" type="email" class="form-control" id="email" aria-describedby="emailHelp" placeholder="Enter email">
                        </div>
                        
                        <div class="form-group">
                          <label class="form-label" for="exampleInputPassword1">Password</label>
                          <input readonly value="<%=result.password%>" required name="password" type="password" class="form-control" id="password" placeholder="Password">
                        </div>
                      </div>

                    
                   
                   
                    
                    </div>
                  </div>
                </div>

            
            </div>
          </div>
        </div>
      </div>
      <!-- // Main Content -->
    </div>

    <!-- If you prefer jQuery these are the required scripts -->
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
    <script src="../js/vendor.js"></script>
    <script src="../js/adminx.js"></script>


    
    <script>
      let form = document.getElementById("form");
      form.addEventListener("submit", (e) => {
        let name = $("#name").val();
        let phone_no = $("#phone_no").val();
        let company_name = $("#company_name").val();
        let customer_address = $("#customer_address").val();
        let gst_no = $("#gst_no").val();
        let domain = $("#domain").val();
        let email = $("#email").val();
        let password = $("#password").val();
        let errorLabel = document.getElementById("errorLabel");
        e.preventDefault();
        $.ajax({
          url: `http://makemybiz.makemybizdchub.in/addCustomers`,
          method: "post",
          contentType: "application/x-www-form-urlencoded",
          data: {
            name,
            phone_no,
            company_name,
            customer_address,
            gst_no,
            domain,
            email,
            password

          },
          success: function (res) {
            window.location = `http://makemybiz.makemybizdchub.in/customers`
          },
          error: function (error) {
            console.log(error);
            if (
              error.responseJSON.data ===
              "Internal error occured: this email is already exist"
            ) {
              errorLabel.style.display = "block";
              errorLabel.innerHTML = "this email is already exist";
            } 
          },
        });
      });
    </script>

    <!-- If you prefer vanilla JS these are the only required scripts -->
    <!-- script src="../dist/js/vendor.js"></script>
    <script src="../dist/js/adminx.vanilla.js"></script-->

    <script>
      // Example starter JavaScript for disabling form submissions if there are invalid fields
      (function() {
        'use strict';

        window.addEventListener('load', function() {
          var form = document.getElementById('needs-validation');
          if(form !== null) {
            form.addEventListener('submit', function(event) {
              if (form.checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
              }
              form.classList.add('was-validated');
            }, false);
          }
        }, false);
      })();
    </script>
  </body>
</html>